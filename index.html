<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compatibility Quiz</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script type="text/javascript">
        emailjs.init("H6_3lY78NbSkIDlq8");
    </script>
    <style>
        * { box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            max-width: 100%; margin: 0; padding: 15px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; color: #333; font-size: 14px;
        }
        .outer-frame {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 18px; padding: 6px;
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.4);
            max-width: 432px; margin: 0 auto;
            position: relative;
        }
        .quiz-container {
            background: white; border-radius: 15px; padding: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); max-width: 420px; margin: 0;
            position: relative; z-index: 1;
        }
        
        #startScreen { text-align: center; padding: 30px 20px; }
        .start-title { font-size: 1.6em; color: #2d3748; margin-bottom: 10px; font-weight: 700; }
        .start-subtitle { font-size: 1em; color: #718096; margin-bottom: 25px; line-height: 1.4; }
        .start-btn {
            width: 100%; padding: 14px; background: linear-gradient(135deg, #48bb78, #38a169);
            color: white; border: none; border-radius: 10px; cursor: pointer; font-size: 1.1em;
            font-weight: 600; transition: all 0.3s; box-shadow: 0 8px 20px rgba(72,187,120,0.3);
        }
        .start-btn:hover { transform: translateY(-2px); box-shadow: 0 12px 30px rgba(72,187,120,0.4); }
        
        h1 { text-align: center; color: #4a5568; margin-bottom: 8px; font-size: 1.4em; }
        .subtitle { text-align: center; color: #718096; margin-bottom: 20px; font-size: 0.95em; }
        .question { margin-bottom: 18px; }
        .question h3 { color: #2d3748; margin-bottom: 12px; font-size: 1.1em; }
        
        .option { 
            display: flex; align-items: center; justify-content: flex-start; gap: 8px;
            margin: 6px 0; padding: 10px 14px; border: 1px solid #e2e8f0;
            border-radius: 8px; cursor: pointer; transition: all 0.2s; background: #f8faff; 
            min-height: 45px; font-size: 0.9em;
        }
        .option:hover { border-color: #4299e1; background: #ebf4ff; transform: translateX(3px); }
        
        .option input[type="radio"], .option input[type="checkbox"] { 
            transform: scale(1.1); flex-shrink: 0; margin-right: 8px;
        }
        .option img {
            width: 40px; height: 45px; flex-shrink: 0; margin-right: 8px; border-radius: 4px;
        }
        .option-text {
            flex: 1; font-weight: 500; text-align: left; line-height: 1.3;
        }
        
        .audio-container { display: flex; align-items: center; gap: 6px; flex: 1; }
        .audio-btn { 
            background: #4299e1; color: white; border: none; border-radius: 50%; 
            width: 28px; height: 28px; cursor: pointer; font-size: 12px; font-weight: bold;
            display: flex; align-items: center; justify-content: center; transition: all 0.2s;
            flex-shrink: 0;
        }
        .audio-btn:hover { background: #3182ce; transform: scale(1.05); }
        .audio-btn:active { transform: scale(0.95); }
        .audio-label { font-weight: 500; flex: 1; font-size: 0.9em; }
        
        button { 
            width: 100%; padding: 12px; background: linear-gradient(135deg, #48bb78, #38a169);
            color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 0.95em;
            font-weight: 600; transition: all 0.2s; margin: 8px 0;
        }
        button:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 8px 20px rgba(72,187,120,0.3); }
        button:disabled { opacity: 0.6; cursor: not-allowed; background: #a0a0a0 !important; }
        .email-input { 
            width: 100%; padding: 10px; margin: 8px 0; border: 1px solid #e2e8f0; 
            border-radius: 6px; font-size: 0.95em; box-sizing: border-box;
        }
        .email-input:disabled { background: #f7fafc; cursor: not-allowed; opacity: 0.7; }
        #results { display: none; text-align: center; font-size: 1.3em; font-weight: bold;
            padding: 25px 15px; background: linear-gradient(135deg, #48bb78, #38a169); 
            color: white; border-radius: 10px; margin-top: 15px;
        }
        .email-section { margin: 18px 0; }
        .email-section label { display: block; margin-bottom: 6px; font-size: 1em; font-weight: 500; }
        .hidden { display: none; }
        .progress { width: 100%; height: 6px; background: #e2e8f0; border-radius: 3px;
            margin-bottom: 15px; overflow: hidden;
        }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #4299e1, #3182ce);
            width: 0%; transition: width 0.3s;
        }
        @media (max-width: 480px) { 
            body { padding: 8px; font-size: 13px; } 
            .outer-frame { max-width: 95%; padding: 5px; border-radius: 16px; }
            .quiz-container { padding: 15px; max-width: 100%; }
            .start-title { font-size: 1.4em; }
            .audio-btn { width: 26px; height: 26px; font-size: 11px; }
            .option { padding: 8px 12px; gap: 6px; min-height: 40px; }
            .option img { width: 35px; height: 40px; }
            .option-text { font-size: 0.85em; }
            button { padding: 10px; font-size: 0.9em; }
        }
    </style>
</head>
<body>
    <div class="outer-frame">
        <div class="quiz-container">
            <div id="startScreen">
                <h1 class="start-title">Compatibility Quiz</h1>
                <p class="start-subtitle">Find your perfect match in 2 minutes</p>
                <button class="start-btn" onclick="startQuiz()">Start Quiz</button>
            </div>
            
            <div id="quizContent" style="display: none;">
                <h1>Compatibility Quiz</h1>
                <p class="subtitle">Answer 6 quick questions</p>
                <div class="progress"><div class="progress-fill" id="progressFill"></div></div>
                
                <form id="quizForm">
                    <!-- All questions remain exactly the same -->
                    <div id="q1" class="question hidden">
                        <h3>1Ô∏è‚É£ What's your ideal date?</h3>
                        <label class="option"><input type="radio" name="q1" value="A"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/dinner.png" alt="Dinner"><span class="option-text">Dinner for two</span></label>
                        <label class="option"><input type="radio" name="q1" value="B"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/club.png" alt="Club"><span class="option-text">Party at a club</span></label>
                        <label class="option"><input type="radio" name="q1" value="C"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/movies.png" alt="Movie"><span class="option-text">Watch movies at home</span></label>
                        <label class="option"><input type="radio" name="q1" value="D"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/park.png" alt="Park"><span class="option-text">A walk in the park</span></label>
                        <button type="button" onclick="nextQuestion()" id="nextBtn1">Next ‚Üí</button>
                    </div>
                    
                    <div id="q2" class="question hidden">
                        <h3>2Ô∏è‚É£ What's important? (Max 3)</h3>
                        <label class="option"><input type="checkbox" name="q2" value="A"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/communication.png" alt="communication"><span class="option-text">Open communication</span></label>
                        <label class="option"><input type="checkbox" name="q2" value="B"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/family.png" alt="Family"><span class="option-text">Family</span></label>
                        <label class="option"><input type="checkbox" name="q2" value="C"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/quality%20time.png" alt="Quality time"><span class="option-text">Quality time</span></label>
                        <label class="option"><input type="checkbox" name="q2" value="D"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/money.png" alt="Money"><span class="option-text">Money</span></label>
                        <label class="option"><input type="checkbox" name="q2" value="E"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/alone%20time.png" alt="Alone time"><span class="option-text">Alone time</span></label>
                        <button type="button" onclick="nextQuestion()" id="nextBtn2">Next ‚Üí</button>
                    </div>

                    <div id="q3" class="question hidden">
                        <h3>3Ô∏è‚É£ Favorite foods? (Max 3)</h3>
                        <label class="option"><input type="checkbox" name="q3" value="A"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/adobo.png" alt="Adobo"><span class="option-text">Adobo</span></label>
                        <label class="option"><input type="checkbox" name="q3" value="B"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/lechon.png" alt="Lechon"><span class="option-text">Lechon</span></label>
                        <label class="option"><input type="checkbox" name="q3" value="C"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/bandeja%20paisa.png" alt="Bandeja Paisa"><span class="option-text">Bandeja Paisa</span></label>
                        <label class="option"><input type="checkbox" name="q3" value="D"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/arepas.png" alt="Arepas"><span class="option-text">Arepas</span></label>
                        <label class="option"><input type="checkbox" name="q3" value="E"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/borscht.png" alt="Borscht"><span class="option-text">Borscht</span></label>
                        <label class="option"><input type="checkbox" name="q3" value="F"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/varenyky.png" alt="Varenyky"><span class="option-text">Varenyky</span></label>
                        <label class="option"><input type="checkbox" name="q3" value="G"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/pad%20thai.png" alt="Pad Thai"><span class="option-text">Pad Thai</span></label>
                        <label class="option"><input type="checkbox" name="q3" value="H"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/tom%20yum.png" alt="Tom Yum Goong"><span class="option-text">Tom Yum Goong</span></label>
                        <button type="button" onclick="nextQuestion()" id="nextBtn3">Next ‚Üí</button>
                    </div>

                    <div id="q4" class="question hidden">
                        <h3>4Ô∏è‚É£ Attractive feature?</h3>
                        <label class="option"><input type="radio" name="q4" value="A"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/petite.png" alt="Petite"><span class="option-text">Petite</span></label>
                        <label class="option"><input type="radio" name="q4" value="B"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/fit%20body.png" alt="Fit body"><span class="option-text">Fit body</span></label>
                        <label class="option"><input type="radio" name="q4" value="C"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/small%20eyes.png" alt="Small eyes"><span class="option-text">Small eyes</span></label>
                        <label class="option"><input type="radio" name="q4" value="D"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/white%20complexion.png" alt="White complexion"><span class="option-text">White complexion</span></label>
                        <button type="button" onclick="nextQuestion()" id="nextBtn4">Next ‚Üí</button>
                    </div>

                    <div id="q5" class="question hidden">
                        <h3>5Ô∏è‚É£ Relatable activity?</h3>
                        <label class="option"><input type="radio" name="q5" value="A"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/working%20out.png" alt="Working out"><span class="option-text">Working out</span></label>
                        <label class="option"><input type="radio" name="q5" value="B"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/karaoke.png" alt="Karaoke"><span class="option-text">Karaoke</span></label>
                        <label class="option"><input type="radio" name="q5" value="C"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/shopping.png" alt="Shopping"><span class="option-text">Shopping</span></label>
                        <label class="option"><input type="radio" name="q5" value="D"><img src="https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/self-care.png" alt="Self-care"><span class="option-text">Self-care</span></label>
                        <button type="button" onclick="nextQuestion()" id="nextBtn5">Next ‚Üí</button>
                    </div>

                    <div id="q6" class="question hidden">
                        <h3>6Ô∏è‚É£ Romantic phrase?</h3>
                        <label class="option"><input type="radio" name="q6" value="A"><span class="audio-container"><span class="audio-label">A. CÃÑh·∫°n r·∫°k khu·πá</span><button class="audio-btn" onclick="playAudio('https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/thai.mp3')" title="Play Thai">üîä</button></span></label>
                        <label class="option"><input type="radio" name="q6" value="B"><span class="audio-container"><span class="audio-label">B. Mahal kita</span><button class="audio-btn" onclick="playAudio('https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/filipino.mp3')" title="Play Filipino">üîä</button></span></label>
                        <label class="option"><input type="radio" name="q6" value="C"><span class="audio-container"><span class="audio-label">C. Ya kokhayu tebe</span><button class="audio-btn" onclick="playAudio('https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/russian.mp3')" title="Play Russian">üîä</button></span></label>
                        <label class="option"><input type="radio" name="q6" value="D"><span class="audio-container"><span class="audio-label">D. Te amo</span><button class="audio-btn" onclick="playAudio('https://raw.githubusercontent.com/MikeeeDeee/Quiz/main/spanish.mp3')" title="Play Spanish">üîä</button></span></label>
                        <button type="button" id="submitBtn" style="background: linear-gradient(135deg, #ed8936, #dd6b20);" onclick="showResults()">Get Results ‚Üí</button>
                    </div>
                </form>
                <div id="results"></div>
            </div>
        </div>
    </div>
    
    <script>
let currentQuestion = 1;
const totalQuestions = 6;
let currentAudio = null;

function startQuiz() {
    // Hide start screen and results
    document.getElementById('startScreen').style.display = 'none';
    document.getElementById('results').style.display = 'none';
    document.getElementById('results').innerHTML = '';
    
    // Show quiz content
    document.getElementById('quizContent').style.display = 'block';
    
    // Hide all questions first
    for (let i = 1; i <= totalQuestions; i++) {
        document.getElementById(`q${i}`).classList.add('hidden');
    }
    
    // Show first question
    document.getElementById('q1').classList.remove('hidden');
    
    // Reset progress
    document.getElementById('progressFill').style.width = '16.67%';
    
    // Reset state
    currentQuestion = 1;
    currentAudio = null;
    document.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach(input => {
        input.checked = false;
    });
    delete window.currentBestMatch;
    delete window.currentScores;
}

function playAudio(url) {
    if (currentAudio) { currentAudio.pause(); currentAudio = null; }
    const btn = event.target;
    const originalText = btn.innerHTML;
    btn.innerHTML = '‚è≥'; btn.disabled = true;
    currentAudio = new Audio(url); currentAudio.volume = 0.8;
    currentAudio.addEventListener('canplay', () => { btn.innerHTML = '‚ñ∂Ô∏è'; currentAudio.play(); });
    currentAudio.addEventListener('play', () => { btn.innerHTML = originalText; btn.disabled = false; });
    currentAudio.addEventListener('error', (e) => { btn.innerHTML = '‚ùå'; setTimeout(() => { btn.innerHTML = originalText; btn.disabled = false; }, 2000); });
    currentAudio.addEventListener('ended', () => { currentAudio = null; });
    currentAudio.load();
}

function nextQuestion() {
    const currentQ = document.getElementById(`q${currentQuestion}`);
    const nextQNum = currentQuestion + 1;
    let checkedCount = document.querySelectorAll(`input[name="q${currentQuestion}"]:checked`).length;
    let answered = false;
    
    if (currentQuestion === 2 || currentQuestion === 3) {
        answered = checkedCount > 0;
    } else {
        answered = checkedCount === 1;
    }
    
    if (!answered) { alert(`Please answer question ${currentQuestion} first!`); return; }
    if ((currentQuestion === 2 || currentQuestion === 3) && checkedCount > 3) { alert(`Please select 3 or fewer options for question ${currentQuestion}.`); return; }
    
    currentQ.classList.add('hidden');
    if (nextQNum <= totalQuestions) {
        document.getElementById(`q${nextQNum}`).classList.remove('hidden');
        currentQuestion = nextQNum;
        document.getElementById('progressFill').style.width = `${(currentQuestion / totalQuestions) * 100}%`;
    }
}

function sendMatchmakerEmail() {
    const userEmail = document.getElementById('userEmail').value.trim();
    if (!userEmail) return;
    const matchBtn = document.getElementById('matchBtn');
    matchBtn.textContent = 'Thank You! ‚úÖ'; matchBtn.disabled = true;
    document.getElementById('userEmail').disabled = true;

    const templateParams = {
        best_match: window.currentBestMatch,
        scores: `Filipina: ${window.currentScores.Filipina}, Thai: ${window.currentScores.Thai}, Ukrainian: ${window.currentScores.Ukrainian}, Latina: ${window.currentScores.Latina}`,
        q1: window.currentQ1 || 'Not answered',
        q2: window.currentQ2.join(', ') || 'None',
        q3: window.currentQ3.join(', ') || 'None',
        q4: window.currentQ4 || 'Not answered',
        q5: window.currentQ5 || 'Not answered',
        q6: window.currentQ6 || 'Not answered',
        user_email: userEmail,
        timestamp: new Date().toLocaleString('en-US', {timeZone: 'Asia/Manila'})
    };

    emailjs.send('service_en29r0t', 'template_84ryw55', templateParams).catch(console.log);
}

function showResults() {
    calculateResults();
}

function calculateResults() {
    let scores = { Filipina: 0, Thai: 0, Ukrainian: 0, Latina: 0 };
    
    window.currentQ1 = document.querySelector('input[name="q1"]:checked')?.value;
    window.currentQ2 = Array.from(document.querySelectorAll('input[name="q2"]:checked')).map(cb => cb.value);
    window.currentQ3 = Array.from(document.querySelectorAll('input[name="q3"]:checked')).map(cb => cb.value);
    window.currentQ4 = document.querySelector('input[name="q4"]:checked')?.value;
    window.currentQ5 = document.querySelector('input[name="q5"]:checked')?.value;
    window.currentQ6 = document.querySelector('input[name="q6"]:checked')?.value;
    
    const q1 = window.currentQ1;
    if (q1 === 'A') { scores.Filipina++; scores.Thai++; scores.Ukrainian++; scores.Latina++; }
    else if (q1 === 'B') { scores.Thai++; scores.Ukrainian++; scores.Latina++; }
    else if (q1 === 'C') { scores.Filipina++; scores.Thai++; scores.Latina++; }
    else if (q1 === 'D') { scores.Filipina++; scores.Ukrainian++; scores.Latina++; }
    
    window.currentQ2.forEach(ans => {
        if (ans === 'A') { scores.Ukrainian++; scores.Latina++; }
        else if (ans === 'B') { scores.Filipina++; scores.Thai++; scores.Ukrainian++; scores.Latina++; }
        else if (ans === 'C') { scores.Filipina++; scores.Thai++; scores.Ukrainian++; }
        else if (ans === 'D') { scores.Filipina++; scores.Latina++; }
        else if (ans === 'E') { scores.Thai++; }
    });
    
    window.currentQ3.forEach(ans => {
        if (ans === 'A' || ans === 'B') scores.Filipina++;
        else if (ans === 'C' || ans === 'D') scores.Latina++;
        else if (ans === 'E' || ans === 'F') scores.Ukrainian++;
        else if (ans === 'G' || ans === 'H') scores.Thai++;
    });
    
    const q4 = window.currentQ4;
    if (q4 === 'A') scores.Filipina++;
    else if (q4 === 'B') scores.Latina++;
    else if (q4 === 'C') scores.Thai++;
    else if (q4 === 'D') scores.Ukrainian++;
    
    const q5 = window.currentQ5;
    if (q5 === 'A') scores.Latina++;
    else if (q5 === 'B') scores.Filipina++;
    else if (q5 === 'C') scores.Thai++;
    else if (q5 === 'D') scores.Ukrainian++;
    
    const q6 = window.currentQ6;
    if (q6 === 'A') scores.Thai++;
    else if (q6 === 'B') scores.Filipina++;
    else if (q6 === 'C') scores.Ukrainian++;
    else if (q6 === 'D') scores.Latina++;
    
    let maxScore = 0; let bestMatch = '';
    for (let type in scores) {
        if (scores[type] > maxScore) { maxScore = scores[type]; bestMatch = type; }
    }
    
    window.currentBestMatch = bestMatch;
    window.currentScores = scores;
    
    document.getElementById('quizForm').style.display = 'none';
    document.getElementById('results').innerHTML = `
        <div style="font-size: 1.2em; margin-bottom: 12px;">
            üéâ Best match: <strong>${bestMatch}</strong>!
        </div>
        <div style="opacity: 0.9; font-size: 0.95em; margin-bottom: 18px;">
            Scores: Filipina: ${scores.Filipina} Thai: ${scores.Thai} Ukrainian: ${scores.Ukrainian} Latina: ${scores.Latina}
        </div>
        <div class="email-section">
            <label>Get matched with a ${bestMatch} woman:</label>
            <input type="email" id="userEmail" class="email-input" placeholder="your@email.com">
            <button id="matchBtn" onclick="sendMatchmakerEmail()" style="background: linear-gradient(135deg, #ed8936, #dd6b20); margin-top: 8px;">Match Me!</button>
        </div>
        <button onclick="takeQuizAgain();" style="background: linear-gradient(135deg, #4299e1, #3182ce);">üîÑ Take Quiz Again</button>
    `;
    document.getElementById('results').style.display = 'block';
}

function takeQuizAgain() {
    // Hide results
    document.getElementById('results').style.display = 'none';
    document.getElementById('results').innerHTML = '';
    
    // Show quiz form
    document.getElementById('quizForm').style.display = 'block';
    
    // Hide all questions first
    for (let i = 1; i <= totalQuestions; i++) {
        document.getElementById(`q${i}`).classList.add('hidden');
    }
    
    // Reset form inputs
    document.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach(input => {
        input.checked = false;
    });
    
    // Show first question
    document.getElementById('q1').classList.remove('hidden');
    
    // Reset progress
    document.getElementById('progressFill').style.width = '16.67%';
    
    // Reset state
    currentQuestion = 1;
    currentAudio = null;
    delete window.currentBestMatch;
    delete window.currentScores;
}
    </script>
</body>
</html>
